<ion-header>
  <ion-toolbar>
    <ion-title>Attach note</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">Cancel</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-segment [formControl]="modeControl">
    <ion-segment-button value="verse">
      <ion-label>Verse</ion-label>
    </ion-segment-button>
    <ion-segment-button value="word">
      <ion-label>Word</ion-label>
    </ion-segment-button>
  </ion-segment>

  @if (modeControl.value === 'verse') {
    <div class="attach-form-block">
      <ion-item lines="none">
        <ion-label position="stacked">Surah</ion-label>
        <ion-select [formControl]="surahControl" interface="popover">
          @for (surah of surahOptions; track surah) {
            <ion-select-option [value]="surah">{{ surah }}</ion-select-option>
          }
        </ion-select>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked">Ayah</ion-label>
        <ion-input
          [formControl]="ayahControl"
          inputmode="numeric"
          placeholder="e.g. 4"
          type="number"
          min="1"
        ></ion-input>
      </ion-item>

      @if (verseError()) {
        <p class="input-error">{{ verseError() }}</p>
      }
    </div>
  } @else {
    <div class="attach-form-block">
      <ion-item lines="none">
        <ion-label position="stacked">Word ref</ion-label>
        <ion-input
          [formControl]="wordRefControl"
          inputmode="text"
          placeholder="12:1:3"
          autocapitalize="off"
          spellcheck="false"
        ></ion-input>
      </ion-item>

      @if (wordError()) {
        <p class="input-error">{{ wordError() }}</p>
      }
    </div>
  }

  @if (saveError()) {
    <p class="input-error">{{ saveError() }}</p>
  }

  <ion-button expand="block" (click)="save()" [disabled]="saving()">
    {{ saving() ? 'Saving...' : 'Attach' }}
  </ion-button>
</ion-content>
