<ion-content [fullscreen]="true" class="notes-tab-content">
  <ion-refresher slot="fixed" (ionRefresh)="onRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  @if (loading()) {
    <ion-list>
      @for (row of skeletonRows; track row) {
        <ion-item lines="none" class="notes-list-item">
          <ion-label>
            <h3><ion-skeleton-text animated style="width: 60%"></ion-skeleton-text></h3>
            <p><ion-skeleton-text animated style="width: 95%"></ion-skeleton-text></p>
            <p><ion-skeleton-text animated style="width: 35%"></ion-skeleton-text></p>
          </ion-label>
        </ion-item>
      }
    </ion-list>
  } @else {
    @if (error()) {
      <ion-item lines="none">
        <ion-label class="notes-empty-state">
          <h3>{{ emptyStateTitle() }}</h3>
          <p>{{ error() }}</p>
        </ion-label>
      </ion-item>
    } @else {
      <ion-list>
        @for (note of notes(); track note.id) {
          <ion-item
            class="notes-list-item"
            lines="full"
            button="true"
            [routerLink]="['/notes', note.id]"
          >
            <ion-label>
              <h3>{{ titleFor(note) }}</h3>
              <p>{{ previewFor(note) }}</p>
              <p class="notes-time">{{ note.updated_at | date: 'MMM d, h:mm a' }}</p>
            </ion-label>
          </ion-item>
        }

        @if (notes().length === 0) {
          <ion-item lines="none">
            <ion-label class="notes-empty-state">
              <h3>{{ emptyStateTitle() }}</h3>
              <p>{{ emptyStateMessage() }}</p>
            </ion-label>
          </ion-item>
        }
      </ion-list>
    }
  }
</ion-content>
