<div class="modal-header">
  <h4 class="modal-title">{{ thirdParty.name }}</h4>
  <button type="button" class="close" aria-label="Close" (click)="goBack()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<form [formGroup]="form" (ngSubmit)="doSave()" novalidate>
  <div class="modal-body">
    <div *ngIf="thirdParty | transcoding : 'GEFCO'" class="form-row">
      <div class="col-12 mb-2">
        <label for="nostra">{{ 'THIRD_PARTY_MODAL.NOSTRA' | translate }}</label>
        <div class="input-group">
          <input id="nostra" name="nostra" class="form-control last-child-form-control" type="text" [value]="thirdParty | transcoding : 'GEFCO'" disabled />
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="col-12 mb-2">
        <label for="place">{{ 'THIRD_PARTY_MODAL.PLACE' | translate }}</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="far fa-location-arrow"></i></span>
          </div>
          <input id="place" name="place" class="form-control last-child-form-control" type="text" [value]="thirdParty.place_name ? thirdParty.place_name : ''" disabled />
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="col-12 mb-2">
        <label for="address1">{{ 'THIRD_PARTY_MODAL.ADDRESS1' | translate }}</label>
        <div class="input-group">
          <input id="address1" name="address1" class="form-control last-child-form-control" type="text" [value]="thirdParty.address1 ? thirdParty.address1 : ''" disabled />
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-12 col-md-6 mb-2">
        <label for="address2">{{ 'THIRD_PARTY_MODAL.ADDRESS2' | translate }}</label>
        <div class="input-group">
          <input id="address2" name="address2" class="form-control" type="text" [value]="thirdParty.address2 ? thirdParty.address2 : ''" disabled />
        </div>
      </div>
      <div class="col-12 col-md-6 mb-2">
        <label for="address3">{{ 'THIRD_PARTY_MODAL.ADDRESS3' | translate }}</label>
        <div class="input-group">
          <input id="address3" name="address3" class="form-control" type="text" [value]="thirdParty.address3 ? thirdParty.address3 : ''" disabled />
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="col-12 col-md-6 mb-2">
        <label for="zip">{{ 'THIRD_PARTY_MODAL.ZIP' | translate }}</label>
        <div class="input-group">
          <input id="zip" name="zip" class="form-control last-child-form-control" type="text" [value]="thirdParty.zip ? thirdParty.zip : ''" disabled />
        </div>
      </div>
      <div class="col-12 col-md-6 mb-2">
        <label for="city">{{ 'THIRD_PARTY_MODAL.CITY' | translate }}</label>
        <div class="input-group">
          <input id="city" name="city" class="form-control last-child-form-control" type="text" [value]="thirdParty.city ? thirdParty.city : ''" disabled />
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-12 mb-2 col-md-6 mb-2">
        <label for="country">{{ 'THIRD_PARTY_MODAL.COUNTRY' | translate }}</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="far fa-globe"></i></span>
          </div>
          <input id="country" name="country" class="form-control last-child-form-control" type="text" [value]="thirdParty.country?.name ? thirdParty.country.name : ''" disabled />
        </div>
      </div>
    </div>

    <div class="form-row mt-3">
      <div class="col-12">
        <h6>{{ 'THIRD_PARTY_MODAL.CONTACT.TITLE' | translate }}</h6>
      </div>
    </div>

    <div *ngIf="!isPartiallyEditable" class="mb-3">
      <div class="form-row">
        <div class="col-12 col-md-6 mb-2">
          <label for="contact_name_view">{{ 'THIRD_PARTY_MODAL.CONTACT.NAME' | translate }}</label>
          <div class="input-group">
            <input id="contact_name_view" name="contact_name_view" class="form-control" type="text" [value]="thirdParty.contacts[0]?.name ? thirdParty.contacts[0].name : ''" disabled />
          </div>
        </div>

        <div class="col-12 col-md-6 mb-2">
          <label for="contact_phone_view">{{ 'THIRD_PARTY_MODAL.CONTACT.PHONE' | translate }}</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="far fa-phone"></i></span>
            </div>
            <input id="contact_phone_view" name="contact_phone_view" class="form-control last-child-form-control" type="text" [value]="thirdParty.contacts[0]?.phone ? thirdParty.contacts[0].phone : ''" disabled />
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="col-12 col-md-6 mb-2">
          <label for="contact_email_view">{{ 'THIRD_PARTY_MODAL.CONTACT.EMAIL' | translate }}</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">
                <i class="far fa-at"></i>
              </span>
            </div>
            <input id="contact_email_view" name="contact_email_view" class="form-control" type="text" [value]="thirdParty.contacts[0]?.email ? thirdParty.contacts[0].email : ''" disabled />
          </div>
        </div>

        <div class="col-12 col-md-6 mb-2">
          <label for="contact_language_view">{{ 'THIRD_PARTY_MODAL.CONTACT.LANGUAGE' | translate }}</label>
          <div class="input-group">
            <input id="contact_language_view" name="contact_language_view" class="form-control" type="text" [value]="contactLanguage | translate" disabled />
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="isPartiallyEditable" class="mb-3">
      <div class="form-row">
        <div class="col-12 col-md-6 mb-2">
          <label for="contact_name_edit">{{ 'THIRD_PARTY_MODAL.CONTACT.NAME' | translate }}</label>
          <div class="input-group">
            <input formControlName="contact_name_edit" id="contact_name_edit" name="contact_name_edit" class="form-control" type="text" [value]="thirdParty.contacts[0]?.name ? thirdParty.contacts[0].name : ''" />
          </div>
        </div>

        <div class="col-12 col-md-6 mb-2">
          <label for="contact_phone_edit">{{ 'THIRD_PARTY_MODAL.CONTACT.PHONE' | translate }}</label>
          <mcit-phone-field id="contact_phone_edit" formControlName="contact_phone_edit"> </mcit-phone-field>
        </div>
      </div>
      <div class="form-row">
        <div class="col-12 col-md-6 mb-2">
          <label for="contact_email_edit">{{ 'THIRD_PARTY_MODAL.CONTACT.EMAIL' | translate }}</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">
                <i class="far fa-at"></i>
              </span>
            </div>
            <input formControlName="contact_email_edit" id="contact_email_edit" name="contact_email_edit" class="form-control" type="email" [value]="thirdParty.contacts[0]?.email ? thirdParty.contacts[0].email : ''" />
          </div>
        </div>

        <div class="col-12 col-md-6 mb-2">
          <label for="contact_language_edit">{{ 'THIRD_PARTY_MODAL.CONTACT.LANGUAGE' | translate }}</label>
          <div class="input-group">
            <select id="contact_language_edit" name="contact_language_edit" class="custom-select" formControlName="contact_language_edit">
              <option *ngFor="let language of languages" [value]="language.code">
                {{ language.name | translate }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-12 mt-2">
        <h6>{{ 'THIRD_PARTY_MODAL.ENTITIES' | translate }}</h6>
      </div>
    </div>
    <div class="form-row mb-3">
      <div class="col-12 mb-2">
        <div class="d-flex flex-row flex-wrap flex-grow-1">
          <div class="custom-control custom-checkbox mx-1">
            <input id="_entity_moveecar" name="_entity_moveecar" type="checkbox" class="custom-control-input" [checked]="isMoveecarEntity" disabled />
            <label class="custom-control-label" for="_entity_moveecar">{{ 'THIRD_PARTY_MODAL.MOVEECAR' | translate }}</label>
          </div>
          <div class="custom-control custom-checkbox mx-1">
            <input id="_entity_gefco" name="_entity_gefco" type="checkbox" class="custom-control-input" [checked]="isGEFCOEntity" disabled />
            <label class="custom-control-label" for="_entity_gefco">{{ 'THIRD_PARTY_MODAL.GEFCO' | translate }}</label>
          </div>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-12">
        <h6>{{ 'THIRD_PARTY_MODAL.ROLES' | translate }}</h6>
      </div>
    </div>
    <div class="form-row mb-3">
      <div class="col-12 mb-2">
        <div class="d-flex flex-row flex-wrap flex-grow-1">
          <ng-container *ngIf="isPartiallyEditable">
            <div class="custom-control custom-checkbox mx-1">
              <input formControlName="role_pickup" [id]="'_role_PICKUP'" [name]="'_role_PICKUP'" type="checkbox" class="custom-control-input" [value]="thirdParty?.roles | hasRole : 'PICKUP'" />
              <label class="custom-control-label" [for]="'_role_PICKUP'">{{ 'THIRD_PARTY_ROLE.PICKUP' | translate }}</label>
            </div>
            <div class="custom-control custom-checkbox mx-1">
              <input formControlName="role_delivery" [id]="'_role_DELIVERY'" [name]="'_role_DELIVERY'" type="checkbox" class="custom-control-input" [value]="thirdParty?.roles | hasRole : 'DELIVERY'" />
              <label class="custom-control-label" [for]="'_role_DELIVERY'">{{ 'THIRD_PARTY_ROLE.DELIVERY' | translate }}</label>
            </div>
          </ng-container>
        </div>
        <div class="d-flex flex-row flex-wrap flex-grow-1">
          <div *ngFor="let role of thirdParty.roles" class="custom-control custom-checkbox mx-1">
            <ng-container *ngIf="!isPartiallyEditable || (isPartiallyEditable && role !== 'PICKUP' && role !== 'DELIVERY')">
              <input [id]="'_role_' + role" [name]="'_role_' + role" type="checkbox" class="custom-control-input" checked disabled />
              <label class="custom-control-label" [for]="'_role_' + role">{{ 'THIRD_PARTY_ROLE.' + role.toUpperCase() | translate }}</label>
              <i class="far fa-info-circle ml-1" style="cursor: pointer" (click)="doViewtRoleDetails(role)" *ngIf="role === 'CARRIER' || role === 'LEGAL_ENTITY' || role === 'STOCK_ACCOUNT' || role === 'PARK'"></i>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

    <div class="form-row justify-content-center mb-3" *ngIf="isInternalExternalFieldNeeded">
      <span class="mr-2 font-weight-bold">
        {{ 'THIRD_PARTY_MODAL.INTERNAL' | translate }}
      </span>
      <ui-switch id="not_intern" color="#31394D" size="small" [checked]="!thirdParty.intern" disabled></ui-switch>
      <span class="ml-2 font-weight-bold">
        {{ 'THIRD_PARTY_MODAL.EXTERNAL' | translate }}
      </span>
    </div>

    <div class="form-row" *ngIf="isAssociatedLegalEntityFieldNeeded">
      <div class="col-12 col-md-6 mb-2">
        <label for="associated_legal_entity">{{ 'THIRD_PARTY_MODAL.ASSOCIATED_LEGAL_ENTITY' | translate }}</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="far fa-building"></i></span>
          </div>
          <input
            id="associated_legal_entity"
            name="associated_legal_entity"
            class="form-control last-child-form-control"
            type="text"
            [value]="thirdParty.associated_legal_entity?.name ? thirdParty.associated_legal_entity.name : ''"
            disabled
          />
        </div>
      </div>
    </div>

    <div class="form-row mb-3" *ngIf="thirdParty.intern">
      <div class="col-12 col-md-6 mb-2" *ngIf="isAgencyCodeFieldNeeded">
        <label for="agency">{{ 'THIRD_PARTY_MODAL.AGENCY_CODE' | translate }}</label>
        <div class="input-group">
          <input id="agency" name="agency" class="form-control" type="text" [value]="thirdParty.agency ? thirdParty.agency : ''" disabled />
        </div>
      </div>

      <div class="col-12 col-md-6 mb-2" *ngIf="isClusterCodeFieldNeeded">
        <label for="cluster_code">{{ 'THIRD_PARTY_MODAL.CLUSTER_CODE' | translate }}</label>
        <div class="input-group">
          <input id="cluster_code" name="cluster_code" class="form-control" type="text" [value]="thirdParty.cluster ? thirdParty.cluster : ''" disabled />
        </div>
      </div>
    </div>

    <div class="form-row mb-3" *ngIf="isCustomerTagsFieldNeeded && thirdParty.tags && thirdParty.tags.length">
      <div class="col-12">
        <label for="customer_tags">{{ 'THIRD_PARTY_MODAL.CUSTOMER_TAGS' | translate }}</label>
        <mcit-tags-input id="customer_tags" [tagList]="thirdParty.tags | tag : 'customer'" [disabled]="true"> </mcit-tags-input>
      </div>
    </div>

    <div class="form-row">
      <div class="col-12 mb-2">
        <button type="button" class="btn btn-block btn-secondary btn-sm" (click)="doEditTranscodings(!isTranscodingEditable)">
          {{ 'THIRD_PARTY_MODAL.EDIT_TRANSCODINGS' | translate }}
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary mr-1" type="submit" [disabled]="form.invalid" *ngIf="isPartiallyEditable || isTranscodingEditable">
      {{ 'COMMON.SAVE' | translate }}
    </button>
    <button class="btn btn-outline-primary mr-1" type="button" (click)="goBack()">
      {{ 'COMMON.CANCEL' | translate }}
    </button>
  </div>
</form>
