<div class="flex-grow-1 flex-lg-grow-0 d-flex flex-row" [class.mb-4]="viewMode === calendarViewMode.SYNTHESIS">
  <div class="col-3">
    <div class="input-group input-group-sm" *ngIf="viewMode !== calendarViewMode.SYNTHESIS && viewMode !== calendarViewMode.PERIODS && calendars && calendars.length">
      <div class="input-group-prepend">
        <span class="input-group-text">{{ 'CALENDARS.TITLE' | translate }}</span>
      </div>
      <select class="custom-select custom-select-sm" [(ngModel)]="selectedCalendarId" (ngModelChange)="onSelectCalendar($event)">
        <option [ngValue]="calendar._id" *ngFor="let calendar of calendars">
          {{ calendarType === 'INVOICING' ? calendar?.name : calendar?.country?.name }}
        </option>
      </select>
      <div class="input-group-append">
        <button type="button" class="btn btn-icon btn-sm" (click)="doEditSelectedCalendar()" [disabled]="!isEditable()" *ngIf="viewMode === calendarViewMode.INVOICING">
          <i class="fas fa-edit"></i>
        </button>
        <button type="button" class="btn btn-icon btn-sm text-danger" *ngIf="selectedCalendar.code !== 'ENDOFMONTH'" (click)="doDeleteSelectedCalendar()" [disabled]="!isEditable()">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="col-4">
    <button class="btn btn-primary btn-sm" type="button" *ngIf="isEditable() && viewMode !== calendarViewMode.PERIODS" (click)="doAddCalendar()">
      {{ 'CALENDARS.ADD_' + viewMode.toUpperCase() | translate }}
    </button>
    <button class="btn btn-primary btn-sm ml-2" type="button" *ngIf="isSelectedCalendarEdited" [disabled]="isSaving" (click)="doSave()">
      <i class="far" [ngClass]="isSaving ? 'fa-pulse fa-spinner' : 'fas fa-save'" aria-hidden="true"></i>
      {{ 'CALENDAR.SAVE' | translate }}
    </button>
  </div>
  <div class="btn-group btn-group-sm col-5 float-right">
    <button class="btn my-btn-toggle" [class.checked]="viewMode === calendarViewMode.SYNTHESIS" (click)="doViewMode(calendarViewMode.SYNTHESIS)">
      {{ 'CALENDARS.SYNTHESIS' | translate }}
    </button>
    <button class="btn my-btn-toggle" [class.checked]="viewMode === calendarViewMode.INVOICING" (click)="doViewMode(calendarViewMode.INVOICING)">
      {{ 'CALENDARS.INVOICING_CALENDARS' | translate }}
    </button>
    <button class="btn my-btn-toggle" [class.checked]="viewMode === calendarViewMode.PERIODS" (click)="doViewMode(calendarViewMode.PERIODS)">
      {{ 'CALENDARS.ACCOUNTING_PERIOD' | translate }}
    </button>
    <button class="btn my-btn-toggle" [class.checked]="viewMode === calendarViewMode.PUBLIC_HOLIDAYS" (click)="doViewMode(calendarViewMode.PUBLIC_HOLIDAYS)">
      {{ 'CALENDARS.PUBLC_HOLIDAYS_CALENDARS' | translate }}
    </button>
  </div>
</div>
<div class="flex-grow-1 flex-lg-grow-0 d-flex flex-row" *ngIf="(viewMode !== calendarViewMode.SYNTHESIS && selectedCalendar) || viewMode === calendarViewMode.PERIODS">
  <div class="col-12" style="font-size: smaller">
    <span class="ml-1 mr-1">
      <small class="font-italic">{{ 'CALENDARS.LAST_UPDATE' | translate }} :</small>
    </span>
    <span>
      <small class="font-weight-light">{{ lastUpdateDate }} {{ 'CALENDARS.BY' | translate }} {{ selectedCalendar?.updated_by }}</small>
    </span>
  </div>
</div>
<ng-container *ngIf="viewMode === calendarViewMode.SYNTHESIS">
  <mcit-calendars-synthesis-view (yearOutput)="setYear($event)" [year]="year" [apiRoute]="apiRoute"></mcit-calendars-synthesis-view>
</ng-container>
<ng-container *ngIf="viewMode === calendarViewMode.PERIODS">
  <mcit-calendars-periods-view [editable]="isEditable()" [selectedCalendar]="selectedCalendar" (yearOutput)="setYear($event)" [year]="year" [apiRoute]="apiRoute"></mcit-calendars-periods-view>
</ng-container>
<ng-container *ngIf="viewMode === calendarViewMode.INVOICING || viewMode === calendarViewMode.PUBLIC_HOLIDAYS">
  <mcit-editable-calendars-view [selectedCalendar]="selectedCalendar" (yearOutput)="setYear($event)" (editionEventOutput)="onEdition($event)" [year]="year" [type]="viewMode | viewModeType" [editable]="isEditable()" [apiRoute]="apiRoute">
  </mcit-editable-calendars-view>
</ng-container>
