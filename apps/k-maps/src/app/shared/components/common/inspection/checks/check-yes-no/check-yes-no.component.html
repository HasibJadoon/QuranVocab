<ng-container *ngIf="yesNoQuestion; else empty">
  <ng-container *ngIf="checkForm?.controls?.choice">
    <form [formGroup]="checkForm" class="row no-gutters" (click)="doChangeCheckPath('.choice.choice_attachment')">
      <ng-container formGroupName="choice">
        <div class="col-12 row no-gutters">
          <div *ngIf="(yesNoQuestion?.check_name | meaning) !== '!NOTHING_LABEL!'" class="col-12 minh25 pr-2 pl-2 pb-2 font-weight-bold">
            {{ yesNoQuestion?.check_name | meaning }}
          </div>
          <div class="col-12 m-1 d-flex justify-content-around">
            <label class="col-3 p-0 text-center minh25 m-0 bg-white" [class.selected]="selectedValue === true">
              <i *ngIf="selectedValue === true" class="fas fa-check-circle pr-1 text-success h5 m-0"></i>
              <i *ngIf="!(selectedValue === true)" class="fas fa-circle pr-1 text-secondary h5 m-0"></i>
              <input class="m-1 d-none" type="radio" [value]="true" formControlName="value" />
              {{ 'COMMON.YES' | translate }}
            </label>
            <label class="col-3 m-0 p-0 text-center minh25 bg-white" [class.selected]="selectedValue === false">
              <i *ngIf="selectedValue === false" class="fas fa-check-circle pr-1 text-success h5 m-0"></i>
              <i *ngIf="!(selectedValue === false)" class="fas fa-circle pr-1 text-secondary h5 m-0"></i>
              <input class="m-1 d-none" type="radio" [value]="false" formControlName="value" />
              {{ 'COMMON.NO' | translate }}
            </label>
          </div>
          <div class="col-12">
            <ng-container *ngIf="yesNoQuestion?.yes?.yes_attachment && selectedValue === true">
              <div class="m-1 pl-1 my-sub-text font-weight-italic" *ngIf="yesNoQuestion?.yes?.yes_attachment?.required === true">
                {{ 'INSPECTIONS.CHECKS.MANDATORY_PICTURE' | translate }}
              </div>
              <mcit-attachments
                [localMode]="localMode"
                [directoryName]="localAttachmentsDirectoryName"
                [attachments]="checkForm?.value?.choice?.choice_attachment"
                (attachlistChanged)="onChoiceAttachListChanged($event)"
                (attachAdded)="onAttachAdded($event)"
                [environment]="environment"
                [editable]="isEditable$ | async"
                [forceGrid4]="forceA4"
                [baseUrl]="prefix_attach_url || baseUrl"
                [suffixUrl]="suffix_attach_url"
                [actions$]="actions$"
              >
              </mcit-attachments>
            </ng-container>
            <ng-container *ngIf="yesNoQuestion?.no?.no_attachment && selectedValue === false">
              <div class="m-1 pl-1 my-sub-text font-weight-italic" *ngIf="yesNoQuestion?.no?.no_attachment?.required === true">
                {{ 'INSPECTIONS.CHECKS.MANDATORY_PICTURE' | translate }}
              </div>
              <mcit-attachments
                [localMode]="localMode"
                [directoryName]="localAttachmentsDirectoryName"
                [attachments]="checkForm?.value?.choice?.choice_attachment"
                (attachlistChanged)="onChoiceAttachListChanged($event)"
                (attachAdded)="onAttachAdded($event)"
                [environment]="environment"
                [editable]="isEditable$ | async"
                [forceGrid4]="forceA4"
                [baseUrl]="prefix_attach_url || baseUrl"
                [suffixUrl]="suffix_attach_url"
                [actions$]="actions$"
              >
              </mcit-attachments>
            </ng-container>
          </div>

          <ng-container *ngIf="yesNoQuestion?.yes?.yes_comment && selectedValue === true">
            <textarea
              class="col-12 p-1 border"
              rows="2"
              formControlName="choice_comment"
              placeholder="{{ (yesNoQuestion?.yes?.yes_comment.required === true ? 'INSPECTIONS.CHECKS.MANDATORY_COMMENTS' : 'INSPECTIONS.CHECKS.COMMENTS') | translate }}"
            ></textarea>
          </ng-container>
          <ng-container *ngIf="yesNoQuestion?.no?.no_comment && selectedValue === false">
            <textarea
              class="col-12 p-1 border"
              rows="2"
              formControlName="choice_comment"
              placeholder="{{ (yesNoQuestion?.no?.no_comment.required === true ? 'INSPECTIONS.CHECKS.MANDATORY_COMMENTS' : 'INSPECTIONS.CHECKS.COMMENTS') | translate }}"
            ></textarea>
          </ng-container>
        </div>

        <mcit-subchecks
          class="col"
          *ngIf="selectedValue === true && checkForm?.value?.choice?.choice_subcheck"
          [subcheckForm]="checkForm?.controls?.choice"
          [localMode]="localMode"
          [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
          [subcheckQuestion]="yesNoQuestion?.yes?.yes_subcheck"
          [environment]="environment"
          [isEditable$]="isEditable$"
          [forceA4]="forceA4"
          [baseUrl]="baseUrl"
          [prefix_attach_url]="prefix_attach_url"
          [suffix_attach_url]="suffix_attach_url"
          [actions$]="actions$"
          (attachAdded)="onAttachAdded($event)"
          (checkPathChanged)="onCheckPathChanged('.choice', $event)"
        ></mcit-subchecks>
        <mcit-subchecks
          class="col"
          *ngIf="selectedValue === false && checkForm?.value?.choice?.choice_subcheck"
          [subcheckForm]="checkForm?.controls?.choice"
          [localMode]="localMode"
          [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
          [subcheckQuestion]="yesNoQuestion?.no?.no_subcheck"
          [environment]="environment"
          [isEditable$]="isEditable$"
          [forceA4]="forceA4"
          [baseUrl]="baseUrl"
          [prefix_attach_url]="prefix_attach_url"
          [suffix_attach_url]="suffix_attach_url"
          [actions$]="actions$"
          (attachAdded)="onAttachAdded($event)"
          (checkPathChanged)="onCheckPathChanged('.choice', $event)"
        ></mcit-subchecks>
        <!--
        <div class="offset-1 col"
        *ngIf="selectedValue === true && checkForm?.value?.choice?.choice_subcheck"
        formGroupName="choice_subcheck">
          <mcit-subcheck-yes-no
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'yes_no'"
            formControlName="yes_no"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [yesNoSubcheckQuestion]="yesNoQuestion?.yes?.yes_subcheck?.yes_no"
            [environment]="environment"
            [isEditable$]="isEditable$"
            [forceA4]="forceA4"
            [baseUrl]="baseUrl"
            [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-yes-no>
          <mcit-subcheck-unique-answer
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'unique_answer'"
            formControlName="unique_answer"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [uniqueSubcheckQuestion]="yesNoQuestion?.yes?.yes_subcheck?.unique_answer"
            [environment]="environment"
            [isEditable$]="isEditable$"
            [forceA4]="forceA4"
            [baseUrl]="baseUrl"
            [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-unique-answer>
          <mcit-subcheck-multi-answers
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'multi_answers'"
            formControlName="multi_answers"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [multiSubcheckQuestion]="yesNoQuestion?.yes?.yes_subcheck?.multi_answers"
            [environment]="environment"
            [isEditable$]="isEditable$"
            [forceA4]="forceA4"
            [baseUrl]="baseUrl"
            [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-multi-answers>
        </div>

        <div class="offset-1 col"
              *ngIf="selectedValue === false && checkForm?.value?.choice?.choice_subcheck"
              formGroupName="choice_subcheck">
          <mcit-subcheck-yes-no
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'yes_no'"
            formControlName="yes_no"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [yesNoSubcheckQuestion]="yesNoQuestion?.no?.no_subcheck?.yes_no"
            [environment]="environment"
            [isEditable$]="isEditable$"
            [forceA4]="forceA4"
            [baseUrl]="baseUrl"
            [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-yes-no>
          <mcit-subcheck-unique-answer
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'unique_answer'"
            formControlName="unique_answer"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [uniqueSubcheckQuestion]="yesNoQuestion?.no?.no_subcheck?.unique_answer"
            [environment]="environment"
            [isEditable$]="isEditable$" [forceA4]="forceA4" [baseUrl]="baseUrl" [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-unique-answer>
          <mcit-subcheck-multi-answers
            *ngIf="checkForm?.value?.choice?.choice_subcheck?.type === 'multi_answers'"
            formControlName="multi_answers"
            [localMode]="localMode"
            [localAttachmentsDirectoryName]="localAttachmentsDirectoryName"
            [multiSubcheckQuestion]="yesNoQuestion?.no?.no_subcheck?.multi_answers"
            [environment]="environment"
            [isEditable$]="isEditable$"
            [forceA4]="forceA4"
            [baseUrl]="baseUrl"
            [prefix_attach_url]="prefix_attach_url"
            [suffix_attach_url]="suffix_attach_url"
            [actions$]="actions$"
            (attachAdded)="onAttachAdded($event)">
          </mcit-subcheck-multi-answers>
        </div>
      -->
      </ng-container>
    </form>
  </ng-container>
</ng-container>

<ng-template #empty>
  <div class="d-flex flex-column justify-content-center h-100">
    <h4 class="text-center">{{ 'COMMON.EMPTY_DATA' | translate }}</h4>
  </div>
</ng-template>
