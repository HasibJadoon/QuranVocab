<div class="app-headerbar">
  <div class="app-headerbar-main">
    <div *ngIf="showTitle && title" class="app-headerbar-title-wrap">
      <h1 class="app-headerbar-title">{{ title }}</h1>
    </div>

    <div *ngIf="showSearch" class="app-headerbar-search-wrap">
      <app-header-search
        [placeholder]="placeholder"
        [value]="value"
        [primaryLabel]="primaryLabel"
        [secondaryLabel]="secondaryLabel"
        [tertiaryLabel]="tertiaryLabel"
        (search)="search.emit($event)"
        (primary)="primary.emit()"
        (secondary)="secondary.emit()"
        (tertiary)="tertiary.emit()"
      />
    </div>
  </div>

  <div *ngIf="shouldShowPagination && pagination" class="app-headerbar-pagination">
    <div class="app-headerbar-pagination-left">
      <div class="app-headerbar-filters" *ngIf="filters.length">
        <select
          *ngFor="let filter of filters"
          class="form-select app-headerbar-select"
          [value]="filter.value"
          (change)="onFilterInput(filter, $event)"
        >
          <option *ngFor="let option of filter.options" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>

      <select
        *ngIf="pagination.pageSizeOptions?.length"
        class="form-select app-headerbar-select"
        [value]="pagination.pageSize"
        (change)="onPageSizeInput($event)"
      >
        <option *ngFor="let size of pagination.pageSizeOptions" [value]="size">
          {{ size }} / page
        </option>
      </select>
    </div>

    <span class="app-headerbar-page-meta">
      Page {{ pagination.page }} of {{ totalPages }}
    </span>

    <div class="btn-group" *ngIf="totalPages > 1">
      <button
        class="btn btn-sm btn-outline-secondary"
        type="button"
        [disabled]="pagination.page <= 1"
        (click)="onPrevPage()"
      >
        Prev
      </button>
      <button
        class="btn btn-sm btn-outline-secondary"
        type="button"
        [disabled]="pagination.page >= totalPages"
        (click)="onNextPage()"
      >
        Next
      </button>
    </div>
  </div>

  <div *ngIf="!shouldShowPagination && filters.length" class="app-headerbar-pagination">
    <div class="app-headerbar-pagination-left">
      <div class="app-headerbar-filters">
        <select
          *ngFor="let filter of filters"
          class="form-select app-headerbar-select"
          [value]="filter.value"
          (change)="onFilterInput(filter, $event)"
        >
          <option *ngFor="let option of filter.options" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>
    <span class="app-headerbar-page-meta">
      &nbsp;
    </span>
  </div>
</div>
