<div [formGroup]="groupForm">
  <div class="input-group input-group-sm border-force mt-1">
    <div class="input-group-prepend">
      <span class="input-group-text">
        <i class="fa-fw" [ngClass]="waiting ? 'far fa-spinner fa-pulse' : filterConfig.autocomplete.iconClass ? filterConfig.autocomplete.iconClass : 'far fa-search'"></i>
      </span>
    </div>
    <input
      autocorrect="off"
      autocapitalize="off"
      spellcheck="false"
      autocomplete="off"
      placeholder="{{ (filterConfig.autocomplete.placeholder ? filterConfig.autocomplete.placeholder : 'COMMON.SEARCH') | translate }}"
      class="form-control"
      formControlName="value"
    />
    <div class="input-group-append">
      <button class="btn btn-outline-secondary last-child-form-control" type="button" (click)="doClear()" tabindex="-1">
        <i class="far fa-times"></i>
      </button>
    </div>
  </div>
  <div *ngIf="list && list.length > 0; else empty" class="d-flex flex-column border mt-1 text-truncate mb-1" [ngStyle]="list.length > 5 ? { 'max-height': '200px', 'overflow-y': 'scroll' } : {}">
    <div *ngFor="let l of list">
      <button class="dropdown-item p-1" type="button" (click)="doSelected(l)">
        <div class="d-flex flex-row">
          <div *ngIf="l.icon?.length" class="col-1 align-self-center d-flex justify-content-center" title="{{ l.iconPlaceholder }}">
            <i [ngClass]="l.icon"></i>
          </div>
          <div class="flex-grow-1 d-flex flex-column">
            <div style="flex: 1.5">{{ l.name }}</div>
            <div *ngIf="l.description" class="font-weight-light" style="flex: 0.5; font-size: 80%">
              {{ l.description }} <span style="font-style: italic">{{ l.descriptionAdditional }} </span>
            </div>
          </div>
        </div>
      </button>
    </div>
  </div>
  <div class="d-flex flex-row" *ngIf="selectList?.length > 0; else noSelection">
    <div class="flex-grow-1 d-flex flex-row flex-wrap grey-background pl-1 pr-1">
      <div *ngFor="let element of selectList; let i = index" class="filter-list-container btn-group btn-group-sm">
        <div class="filter-list-element pl-1">{{ element.name }}&nbsp;<i style="cursor: pointer" *ngIf="selectList.length > 1" class="pl-1 pr-1 far fa-times" (click)="doRemove(i)"></i></div>
      </div>
    </div>
    <div class="d-flex align-items-center">
      <div class="clear-list cursor-pointer" (click)="doClearList()">
        <i class="far fa-times"></i>
      </div>
    </div>
  </div>

  <div *ngIf="filterConfig.excludable">
    <ui-switch id="filter_exclusion" color="#31394D" size="small" formControlName="excluded" (click)="onExludeChange($event)"></ui-switch>
    <span class="ml-2" [class.font-weight-bold]="groupForm.get('excluded').value">{{ 'SEARCH_FIELD.FILTERS.EXCLUDE' | translate }}</span>
  </div>

  <div *ngIf="filterConfig.empty">
    <ui-switch id="filter_empty" color="#31394D" size="small" formControlName="empty" (click)="onEmptyChange($event)"></ui-switch>
    <span class="ml-2" [class.font-weight-bold]="groupForm.get('empty').value">{{ 'SEARCH_FIELD.FILTERS.EMPTY' | translate }}</span>
  </div>

  <ng-template #noSelection>
    <div class="d-flex flex-row justify-content-center text-truncate">
      <span>{{ 'COMMON.EMPTY_LIST' | translate }}</span>
    </div>
  </ng-template>
</div>
<ng-template #empty>
  <div *ngIf="groupForm.get('value').value || waiting" class="d-flex flex-row justify-content-center mt-1">
    <span class="font-italic font-weight-light small">{{ waiting ? '...' : ('COMMON.EMPTY_RESULT' | translate) }}</span>
  </div>
</ng-template>
