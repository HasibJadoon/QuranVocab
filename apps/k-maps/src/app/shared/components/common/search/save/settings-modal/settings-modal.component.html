<div class="modal-header">
  <h4 class="modal-title">{{ 'SEARCH_FIELD.SAVE.SETTINGS.TITLE' | translate }}</h4>
  <button type="button" class="close" aria-label="Close" (click)="doClose()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div [formGroup]="groupForm" class="modal-body">
  <div class="form-row">
    <div class="col-12 col-md-6 mb-2">
      <label for="filtersDisplayMode">{{ 'SEARCH_FIELD.SAVE.SETTINGS.FILTERS_DISPLAY_MODE' | translate }}</label>
      <div class="input-group input-group-sm">
        <select id="filtersDisplayMode" class="custom-select" name="filtersDisplayMode" formControlName="filtersDisplayMode">
          <option value="auto">{{ 'SEARCH_FIELD.SAVE.SETTINGS.AUTO' | translate }}</option>
          <option value="modal">{{ 'SEARCH_FIELD.SAVE.SETTINGS.MODAL' | translate }}</option>
          <option value="dropdown">{{ 'SEARCH_FIELD.SAVE.SETTINGS.DROPDOWN' | translate }}</option>
          <option value="inline">{{ 'SEARCH_FIELD.SAVE.SETTINGS.INLINE' | translate }}</option>
        </select>
      </div>
    </div>
    <div class="col-12 col-md-6 mb-2">
      <label for="saveDisplayMode">{{ 'SEARCH_FIELD.SAVE.SETTINGS.SAVE_DISPLAY_MODE' | translate }}</label>
      <div class="input-group input-group-sm">
        <select id="saveDisplayMode" class="custom-select" name="saveDisplayMode" formControlName="saveDisplayMode">
          <option value="auto">{{ 'SEARCH_FIELD.SAVE.SETTINGS.AUTO' | translate }}</option>
          <option value="modal">{{ 'SEARCH_FIELD.SAVE.SETTINGS.MODAL' | translate }}</option>
          <option value="dropdown">{{ 'SEARCH_FIELD.SAVE.SETTINGS.DROPDOWN' | translate }}</option>
        </select>
      </div>
    </div>
  </div>

  <hr />

  <div class="form-row">
    <div class="col-12 mb-2">
      <h6>{{ 'SEARCH_FIELD.FILTERS.TITLE' | translate }}</h6>
    </div>
  </div>

  <ng-container formGroupName="filters">
    <div class="form-row">
      <div *ngFor="let key of filtersConfig | keys" class="col-12 col-md-6 mb-2" [formGroupName]="key">
        <label [for]="key">{{ filtersConfig[key].nameKey | translate }}</label>
        <div class="input-group input-group-sm">
          <select [id]="key + '-visibility'" class="custom-select" [name]="key + '-visibility'" formControlName="visibility">
            <option value="visible">{{ 'SEARCH_FIELD.SAVE.SETTINGS.VISIBLE' | translate }}</option>
            <option value="hidden">{{ 'SEARCH_FIELD.SAVE.SETTINGS.HIDDEN' | translate }}</option>
          </select>
          <input [id]="key + '-defaultValue'" class="form-control" [name]="key + '-defaultValue'" type="text" [value]="groupForm.get('filters.' + key + '.defaultValue').value | filtervalue : filtersConfig[key]" disabled />
          <div class="input-group-append">
            <button #menuButton class="btn btn-icon btn-sm dropdown-toggle" type="button" (click)="doEditDefaultValue(menuButton, key)">
              <i class="far fa-edit"></i>
            </button>
            <button class="btn btn-icon btn-sm" type="button" (click)="doClearDefaultValue(key)">
              <i class="far fa-times"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-danger mr-1" (click)="doReset()">
    {{ 'COMMON.RESET' | translate }}
  </button>
  <button type="button" class="btn btn-outline-primary ml-auto" (click)="doClose()">
    {{ 'COMMON.CLOSE' | translate }}
  </button>
</div>
