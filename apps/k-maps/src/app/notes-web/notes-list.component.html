<section class="notes-list">
  <header class="list-header">
    <div class="status-tabs" role="tablist" aria-label="Note status">
      <button
        type="button"
        class="status-tab"
        [class.is-active]="status === 'inbox'"
        (click)="setStatus('inbox')"
      >
        Inbox
      </button>
      <button
        type="button"
        class="status-tab"
        [class.is-active]="status === 'archived'"
        (click)="setStatus('archived')"
      >
        Archived
      </button>
    </div>

    <button class="new-note-btn" type="button" (click)="requestCreate()" [disabled]="creating">
      {{ creating ? 'Creating...' : 'New Note' }}
    </button>
  </header>

  <div class="search-row">
    <input
      type="search"
      [formControl]="searchControl"
      placeholder="Search notes"
      autocomplete="off"
      spellcheck="false"
      aria-label="Search notes"
    />
  </div>

  <div class="list-body" [class.is-loading]="loading">
    @if (loading) {
      @for (row of [1,2,3,4,5,6]; track row) {
        <article class="note-item note-item--skeleton">
          <span class="sk sk-title"></span>
          <span class="sk sk-preview"></span>
          <span class="sk sk-time"></span>
        </article>
      }
    } @else {
      @if (notes.length > 0) {
        @for (note of notes; track trackById($index, note)) {
          <button
            type="button"
            class="note-item"
            [class.is-active]="selectedId === note.id"
            (click)="selectNote(note.id)"
          >
            <h3>{{ titleFor(note) }}</h3>
            <p>{{ previewFor(note) }}</p>
            <time>{{ note.updated_at | date: 'MMM d, h:mm a' }}</time>
          </button>
        }
      } @else {
        <div class="empty-state">
          <p>No notes found.</p>
        </div>
      }
    }
  </div>
</section>
