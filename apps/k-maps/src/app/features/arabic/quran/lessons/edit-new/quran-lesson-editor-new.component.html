<section class="quran-edit-new">
  <header class="edit-hero">
    <div>
      <p class="hero-kicker">Qur'anic Lesson Builder</p>
      <h1>{{ state.lessonTitleEn || (state.isNew ? 'New Quran Lesson' : 'Lesson #' + state.lessonId) }}</h1>
      <p class="hero-intent">Container -> Unit -> Lesson -> Tasks. Structure first, pedagogy later.</p>
    </div>
    <div class="hero-actions">
      <button type="button" class="btn btn-ghost" (click)="clearDraft()">New Quran Lesson</button>
      <button type="button" class="btn btn-ghost" (click)="back()">Back</button>
    </div>
  </header>

  <div class="edit-grid">
    <main class="edit-panel">
      <div class="panel-head">
        <div>
          <h2>{{ activeStep.label }}</h2>
          <p>{{ activeStep.intent }}</p>
        </div>
        <div class="panel-actions">
          <span class="panel-chip" [class.panel-chip--locked]="state.referenceLocked">
            {{ state.referenceLocked ? 'Reference Locked' : 'Reference Open' }}
          </span>
          <span class="panel-chip" [class.panel-chip--locked]="state.lessonLocked">
            {{ state.lessonLocked ? 'Lesson Saved' : 'Lesson Draft' }}
          </span>
        </div>
      </div>

      <div class="panel-body">
        <ng-container [ngSwitch]="activeStep.id">
          <app-quran-lesson-container *ngSwitchCase="'container'"></app-quran-lesson-container>

          <app-quran-lesson-container-unit *ngSwitchCase="'unit'"></app-quran-lesson-container-unit>

          <app-quran-lesson-lesson *ngSwitchCase="'lesson'"></app-quran-lesson-lesson>

          <app-quran-lesson-tasks *ngSwitchCase="'tasks'"></app-quran-lesson-tasks>
        </ng-container>
      </div>
    </main>
  </div>
</section>
